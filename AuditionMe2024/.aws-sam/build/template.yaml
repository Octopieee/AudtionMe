AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: 'AuditionMe2024SAM

  Sample SAM Template for AuditionMe2024SAM

  '
Globals:
  Function:
    Timeout: 3
    MemorySize: 128
  Api:
    Cors:
      AllowMethods: '''GET,POST,DELETE,PUT,OPTIONS'''
      AllowHeaders: '''content-type'''
      AllowOrigin: '''*'''
Resources:
  PostDirector:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: PostDirector
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMeDirectors2024
      Architectures:
      - x86_64
      Events:
        CreatePerson:
          Type: Api
          Properties:
            Path: /directors
            Method: post
    Metadata:
      SamResourceId: PostDirector
  GetDirector:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: GetDirector
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMeDirectors2024
      Architectures:
      - x86_64
      Events:
        GetPerson:
          Type: Api
          Properties:
            Path: /directors
            Method: get
    Metadata:
      SamResourceId: GetDirector
  GetDirectorByID:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: GetDirectorByID
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMeDirectors2024
      Architectures:
      - x86_64
      Events:
        GetPersonID:
          Type: Api
          Properties:
            Path: /directors/{director_id}
            Method: get
    Metadata:
      SamResourceId: GetDirectorByID
  UpdateDirector:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: UpdateDirector
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMeDirectors2024
      Architectures:
      - x86_64
      Events:
        PutPerson:
          Type: Api
          Properties:
            Path: /directors
            Method: put
    Metadata:
      SamResourceId: UpdateDirector
  DeleteDirectorByID:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: DeleteDirectorByID
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMeDirectors2024
      Architectures:
      - x86_64
      Events:
        DeletePerson:
          Type: Api
          Properties:
            Path: /directors/{director_id}
            Method: delete
    Metadata:
      SamResourceId: DeleteDirectorByID
  PostPerformance:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: PostPerformance
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformances2024
      Architectures:
      - x86_64
      Events:
        CreatePerson:
          Type: Api
          Properties:
            Path: /performances
            Method: post
    Metadata:
      SamResourceId: PostPerformance
  GetPerformance:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: GetPerformance
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformances2024
      Architectures:
      - x86_64
      Events:
        GetPerson:
          Type: Api
          Properties:
            Path: /performances
            Method: get
    Metadata:
      SamResourceId: GetPerformance
  GetPerformanceByID:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: GetPerformanceByID
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformances2024
      Architectures:
      - x86_64
      Events:
        GetPersonID:
          Type: Api
          Properties:
            Path: /performances/{performance_id}
            Method: get
    Metadata:
      SamResourceId: GetPerformanceByID
  UpdatePerformance:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: UpdatePerformance
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformances2024
      Architectures:
      - x86_64
      Events:
        PutPerson:
          Type: Api
          Properties:
            Path: /performances
            Method: put
    Metadata:
      SamResourceId: UpdatePerformance
  SignUp:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: SignUp
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformances2024
      Architectures:
      - x86_64
      Events:
        DeletePerson:
          Type: Api
          Properties:
            Path: /performances/signup
            Method: put
    Metadata:
      SamResourceId: SignUp
  CastPerformer:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: CastPerformer
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformances2024
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformers2024
      Architectures:
      - x86_64
      Events:
        DeletePerson:
          Type: Api
          Properties:
            Path: /performances/cast
            Method: put
    Metadata:
      SamResourceId: CastPerformer
  DeletePerformanceByID:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: DeletePerformanceByID
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformances2024
      Architectures:
      - x86_64
      Events:
        DeletePerson:
          Type: Api
          Properties:
            Path: /performances/{performance_id}
            Method: delete
    Metadata:
      SamResourceId: DeletePerformanceByID
  PostPerformer:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: PostPerformer
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformers2024
      Architectures:
      - x86_64
      Events:
        CreatePerson:
          Type: Api
          Properties:
            Path: /performers
            Method: post
    Metadata:
      SamResourceId: PostPerformer
  GetPerformer:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: GetPerformer
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformers2024
      Architectures:
      - x86_64
      Events:
        GetPerson:
          Type: Api
          Properties:
            Path: /performers
            Method: get
    Metadata:
      SamResourceId: GetPerformer
  GetPerformerByID:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: GetPerformerByID
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformers2024
      Architectures:
      - x86_64
      Events:
        GetPersonID:
          Type: Api
          Properties:
            Path: /performers/{performer_id}
            Method: get
    Metadata:
      SamResourceId: GetPerformerByID
  UpdatePerformer:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: UpdatePerformer
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformers2024
      Architectures:
      - x86_64
      Events:
        PutPerson:
          Type: Api
          Properties:
            Path: /performers
            Method: put
    Metadata:
      SamResourceId: UpdatePerformer
  DeletePerformerByID:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: DeletePerformerByID
      Handler: app.lambda_handler
      Runtime: python3.12
      Policies:
      - AmazonDynamoDBFullAccess
      - DynamoDBCrudPolicy:
          TableName: AuditionMePerformers2024
      Architectures:
      - x86_64
      Events:
        DeletePerson:
          Type: Api
          Properties:
            Path: /performers/{performer_id}
            Method: delete
    Metadata:
      SamResourceId: DeletePerformerByID
